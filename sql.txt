-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.Account (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  open_date date NOT NULL,
  close_date date,
  total_amount double precision,
  client_id bigint NOT NULL,
  CONSTRAINT Account_pkey PRIMARY KEY (id),
  CONSTRAINT Account_client_id_fkey FOREIGN KEY (client_id) REFERENCES public.Client(id)
);
CREATE TABLE public.AccountDetail (
  account_id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  product_id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  quantity bigint,
  unit_price double precision,
  total_per_item double precision,
  CONSTRAINT AccountDetail_pkey PRIMARY KEY (account_id, product_id),
  CONSTRAINT AccountDetail_product_id_fkey FOREIGN KEY (product_id) REFERENCES public.Product(id),
  CONSTRAINT AccountDetail_account_id_fkey FOREIGN KEY (account_id) REFERENCES public.Account(id)
);
CREATE TABLE public.Category (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name character varying NOT NULL,
  CONSTRAINT Category_pkey PRIMARY KEY (id)
);
CREATE TABLE public.Client (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name character varying NOT NULL UNIQUE,
  CONSTRAINT Client_pkey PRIMARY KEY (id)
);
CREATE TABLE public.Product (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name character varying NOT NULL UNIQUE,
  price double precision NOT NULL,
  category_id bigint NOT NULL,
  CONSTRAINT Product_pkey PRIMARY KEY (id),
  CONSTRAINT Product_category_id_fkey FOREIGN KEY (category_id) REFERENCES public.Category(id)
);